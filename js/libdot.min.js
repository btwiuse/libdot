"use strict";const lib={initCallbacks_:[],registerInit:function(r,e){return lib.initCallbacks_.push([r,e]),e},init:function(r,e){var t=lib.initCallbacks_,i=function(){if(t.length){var o=t.shift();e&&e(`init: ${o[0]}`),o[1](i)}else r()};if("function"!=typeof r)throw new Error("Missing or invalid argument: onInit");setTimeout(i,0)},assert:function(r){window.chai?lib.assert=window.chai.assert:lib.assert=function(r){},lib.assert(r)},notNull:function(r){return lib.assert(null!==r),r},waitUntil:async function(r){return new Promise(e=>{const t=()=>{if(r())return e();setTimeout(t,0)};t()})},polyfill:{}};lib.polyfill.stringPadStart=function(){String.prototype.padStart=function(r,e){return(r-=this.length)<=0?String(this):(void 0===e&&(e=" "),r>e.length&&(e=e.repeat(r/e.length+1)),e.slice(0,r)+String(this))}},String.prototype.padStart||lib.polyfill.stringPadStart(),lib.polyfill.stringPadEnd=function(){String.prototype.padEnd=function(r,e){return(r-=this.length)<=0?String(this):(void 0===e&&(e=" "),r>e.length&&(e=e.repeat(r/e.length+1)),String(this)+e.slice(0,r))}},String.prototype.padEnd||lib.polyfill.stringPadEnd(),lib.polyfill.object=function(){const r=Function.bind.call(Function.call,Array.prototype.reduce),e=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),t=Function.bind.call(Function.call,Array.prototype.concat);Object.values||(Object.values=function(i){return r(Reflect.ownKeys(i),(r,o)=>t(r,"string"==typeof o&&e(i,o)?[i[o]]:[]),[])}),Object.entries||(Object.entries=function(i){return r(Reflect.ownKeys(i),(r,o)=>t(r,"string"==typeof o&&e(i,o)?[[o,i[o]]]:[]),[])})},Object.values&&Object.entries||lib.polyfill.object(),lib.polyfill.promiseFinally=function(){const r=function(r,e){if(!r||"object"!=typeof r&&"function"!=typeof r)throw new TypeError("Assertion failed: Type(O) is not Object");const t=r.constructor;if(void 0===t)return e;if(!t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("O.constructor is not an Object");const i="function"==typeof Symbol&&"symbol"==typeof Symbol.species?t[Symbol.species]:void 0;if(null==i)return e;if("function"==typeof i&&i.prototype)return i;throw new TypeError("no constructor found")};Object.defineProperty(Promise.prototype,"finally",{configurable:!0,writable:!0,value:function(e){const t=this;if("object"!=typeof t||null===t)throw new TypeError('"this" value is not an Object');const i=r(t,Promise);return"function"!=typeof e?Promise.prototype.then.call(t,e,e):Promise.prototype.then.call(t,r=>new i(r=>r(e())).then(()=>r),r=>new i(r=>r(e())).then(()=>{throw r}))}})},"function"!=typeof Promise.prototype.finally&&lib.polyfill.promiseFinally(),lib.array={},lib.array.concatTyped=function(...r){let e=0;for(const t of r)e+=t.length;const t=new r[0].constructor(e);let i=0;for(const e of r)t.set(e,i),i+=e.length;return t},lib.array.compare=function(r,e){if(null===r||null===e)return null===r&&null===e;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0},lib.codec={},lib.codec.codeUnitArrayToString=function(r){let e="";for(let t=0;t<r.length;++t)e+=String.fromCharCode(r[t]);return e},lib.codec.stringToCodeUnitArray=function(r,e=new Uint8Array(r.length)){for(let t=0;t<r.length;++t)e[t]=r.charCodeAt(t);return e},lib.colors={},lib.colors.re_={hex16:/#([a-f0-9])([a-f0-9])([a-f0-9])/i,hex24:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/i,rgb:new RegExp("^/s*rgb/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*/)/s*$".replace(/\//g,"\\"),"i"),rgba:new RegExp("^/s*rgba/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)/)/s*$".replace(/\//g,"\\"),"i"),rgbx:new RegExp("^/s*rgba?/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)?/)/s*$".replace(/\//g,"\\"),"i"),x11rgb:/^\s*rgb:([a-f0-9]{1,4})\/([a-f0-9]{1,4})\/([a-f0-9]{1,4})\s*$/i,name:/[a-z][a-z0-9\s]+/},lib.colors.rgbToX11=function(r){function e(r){return r=(257*Math.min(r,255)).toString(16),lib.f.zpad(r,4)}var t=r.match(lib.colors.re_.rgbx);return t?"rgb:"+e(t[1])+"/"+e(t[2])+"/"+e(t[3]):null},lib.colors.x11HexToCSS=function(r){if(!r.startsWith("#"))return null;if(r=r.substr(1),-1==[3,6,9,12].indexOf(r.length))return null;if(r.match(/[^a-f0-9]/i))return null;var e=r.length/3,t=r.substr(0,e),i=r.substr(e,e),o=r.substr(e+e,e);return lib.colors.arrayToRGBA([t,i,o].map((function(r){return r=parseInt(r,16),2==e?r:1==e?r<<4:r>>4*(e-2)})))},lib.colors.x11ToCSS=function(r){var e=r.match(lib.colors.re_.x11rgb);return e?(e.splice(0,1),lib.colors.arrayToRGBA(e.map((function(r){return 1==r.length?parseInt(r+r,16):2==r.length?parseInt(r,16):(3==r.length&&(r+=r.substr(2)),Math.round(parseInt(r,16)/257))})))):r.startsWith("#")?lib.colors.x11HexToCSS(r):lib.colors.nameToRGB(r)},lib.colors.hexToRGB=function(r){var e=lib.colors.re_.hex16,t=lib.colors.re_.hex24;4==r.length&&(r=r.replace(e,(function(r,e,t,i){return"#"+e+e+t+t+i+i})));var i=r.match(t);return i?"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")":null},lib.colors.rgbToHex=function(r){var e=lib.colors.crackRGB(r);return e?"#"+lib.f.zpad((parseInt(e[0],10)<<16|parseInt(e[1],10)<<8|parseInt(e[2],10)<<0).toString(16),6):null},lib.colors.normalizeCSS=function(r){return r.startsWith("#")?lib.colors.hexToRGB(r):lib.colors.re_.rgbx.test(r)?r:lib.colors.nameToRGB(r)},lib.colors.arrayToRGBA=function(r){var e=r.length>3?r[3]:1;return"rgba("+r[0]+", "+r[1]+", "+r[2]+", "+e+")"},lib.colors.setAlpha=function(r,e){var t=lib.colors.crackRGB(r);return t[3]=e,lib.colors.arrayToRGBA(t)},lib.colors.mix=function(r,e,t){for(var i=lib.colors.crackRGB(r),o=lib.colors.crackRGB(e),n=0;n<4;++n){var g=o[n]-i[n];i[n]=Math.round(parseInt(i[n],10)+g*t).toString()}return lib.colors.arrayToRGBA(i)},lib.colors.crackRGB=function(r){var e;if(r.startsWith("rgba")){if(e=r.match(lib.colors.re_.rgba))return e.shift(),Array.from(e)}else if(e=r.match(lib.colors.re_.rgb))return e.shift(),e.push("1"),Array.from(e);return console.error("Couldn't crack: "+r),null},lib.colors.nameToRGB=function(r){return r in lib.colors.colorNames?lib.colors.colorNames[r]:(r=r.toLowerCase())in lib.colors.colorNames?lib.colors.colorNames[r]:(r=r.replace(/\s+/g,""))in lib.colors.colorNames?lib.colors.colorNames[r]:null},lib.colors.stockColorPalette=["#000000","#CC0000","#4E9A06","#C4A000","#3465A4","#75507B","#06989A","#D3D7CF","#555753","#EF2929","#00BA13","#FCE94F","#729FCF","#F200CB","#00B5BD","#EEEEEC","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#0087FF","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"].map(lib.colors.hexToRGB),lib.colors.colorPalette=lib.colors.stockColorPalette,lib.colors.colorNames={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",antiquewhite1:"rgb(255, 239, 219)",antiquewhite2:"rgb(238, 223, 204)",antiquewhite3:"rgb(205, 192, 176)",antiquewhite4:"rgb(139, 131, 120)",aquamarine:"rgb(127, 255, 212)",aquamarine1:"rgb(127, 255, 212)",aquamarine2:"rgb(118, 238, 198)",aquamarine3:"rgb(102, 205, 170)",aquamarine4:"rgb(69, 139, 116)",azure:"rgb(240, 255, 255)",azure1:"rgb(240, 255, 255)",azure2:"rgb(224, 238, 238)",azure3:"rgb(193, 205, 205)",azure4:"rgb(131, 139, 139)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",bisque1:"rgb(255, 228, 196)",bisque2:"rgb(238, 213, 183)",bisque3:"rgb(205, 183, 158)",bisque4:"rgb(139, 125, 107)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blue1:"rgb(0, 0, 255)",blue2:"rgb(0, 0, 238)",blue3:"rgb(0, 0, 205)",blue4:"rgb(0, 0, 139)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",brown1:"rgb(255, 64, 64)",brown2:"rgb(238, 59, 59)",brown3:"rgb(205, 51, 51)",brown4:"rgb(139, 35, 35)",burlywood:"rgb(222, 184, 135)",burlywood1:"rgb(255, 211, 155)",burlywood2:"rgb(238, 197, 145)",burlywood3:"rgb(205, 170, 125)",burlywood4:"rgb(139, 115, 85)",cadetblue:"rgb(95, 158, 160)",cadetblue1:"rgb(152, 245, 255)",cadetblue2:"rgb(142, 229, 238)",cadetblue3:"rgb(122, 197, 205)",cadetblue4:"rgb(83, 134, 139)",chartreuse:"rgb(127, 255, 0)",chartreuse1:"rgb(127, 255, 0)",chartreuse2:"rgb(118, 238, 0)",chartreuse3:"rgb(102, 205, 0)",chartreuse4:"rgb(69, 139, 0)",chocolate:"rgb(210, 105, 30)",chocolate1:"rgb(255, 127, 36)",chocolate2:"rgb(238, 118, 33)",chocolate3:"rgb(205, 102, 29)",chocolate4:"rgb(139, 69, 19)",coral:"rgb(255, 127, 80)",coral1:"rgb(255, 114, 86)",coral2:"rgb(238, 106, 80)",coral3:"rgb(205, 91, 69)",coral4:"rgb(139, 62, 47)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",cornsilk1:"rgb(255, 248, 220)",cornsilk2:"rgb(238, 232, 205)",cornsilk3:"rgb(205, 200, 177)",cornsilk4:"rgb(139, 136, 120)",cyan:"rgb(0, 255, 255)",cyan1:"rgb(0, 255, 255)",cyan2:"rgb(0, 238, 238)",cyan3:"rgb(0, 205, 205)",cyan4:"rgb(0, 139, 139)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgoldenrod1:"rgb(255, 185, 15)",darkgoldenrod2:"rgb(238, 173, 14)",darkgoldenrod3:"rgb(205, 149, 12)",darkgoldenrod4:"rgb(139, 101, 8)",darkgray:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkgrey:"rgb(169, 169, 169)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkolivegreen1:"rgb(202, 255, 112)",darkolivegreen2:"rgb(188, 238, 104)",darkolivegreen3:"rgb(162, 205, 90)",darkolivegreen4:"rgb(110, 139, 61)",darkorange:"rgb(255, 140, 0)",darkorange1:"rgb(255, 127, 0)",darkorange2:"rgb(238, 118, 0)",darkorange3:"rgb(205, 102, 0)",darkorange4:"rgb(139, 69, 0)",darkorchid:"rgb(153, 50, 204)",darkorchid1:"rgb(191, 62, 255)",darkorchid2:"rgb(178, 58, 238)",darkorchid3:"rgb(154, 50, 205)",darkorchid4:"rgb(104, 34, 139)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkseagreen1:"rgb(193, 255, 193)",darkseagreen2:"rgb(180, 238, 180)",darkseagreen3:"rgb(155, 205, 155)",darkseagreen4:"rgb(105, 139, 105)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategray1:"rgb(151, 255, 255)",darkslategray2:"rgb(141, 238, 238)",darkslategray3:"rgb(121, 205, 205)",darkslategray4:"rgb(82, 139, 139)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",debianred:"rgb(215, 7, 81)",deeppink:"rgb(255, 20, 147)",deeppink1:"rgb(255, 20, 147)",deeppink2:"rgb(238, 18, 137)",deeppink3:"rgb(205, 16, 118)",deeppink4:"rgb(139, 10, 80)",deepskyblue:"rgb(0, 191, 255)",deepskyblue1:"rgb(0, 191, 255)",deepskyblue2:"rgb(0, 178, 238)",deepskyblue3:"rgb(0, 154, 205)",deepskyblue4:"rgb(0, 104, 139)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",dodgerblue1:"rgb(30, 144, 255)",dodgerblue2:"rgb(28, 134, 238)",dodgerblue3:"rgb(24, 116, 205)",dodgerblue4:"rgb(16, 78, 139)",firebrick:"rgb(178, 34, 34)",firebrick1:"rgb(255, 48, 48)",firebrick2:"rgb(238, 44, 44)",firebrick3:"rgb(205, 38, 38)",firebrick4:"rgb(139, 26, 26)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",gold1:"rgb(255, 215, 0)",gold2:"rgb(238, 201, 0)",gold3:"rgb(205, 173, 0)",gold4:"rgb(139, 117, 0)",goldenrod:"rgb(218, 165, 32)",goldenrod1:"rgb(255, 193, 37)",goldenrod2:"rgb(238, 180, 34)",goldenrod3:"rgb(205, 155, 29)",goldenrod4:"rgb(139, 105, 20)",gray:"rgb(190, 190, 190)",gray0:"rgb(0, 0, 0)",gray1:"rgb(3, 3, 3)",gray10:"rgb(26, 26, 26)",gray100:"rgb(255, 255, 255)",gray11:"rgb(28, 28, 28)",gray12:"rgb(31, 31, 31)",gray13:"rgb(33, 33, 33)",gray14:"rgb(36, 36, 36)",gray15:"rgb(38, 38, 38)",gray16:"rgb(41, 41, 41)",gray17:"rgb(43, 43, 43)",gray18:"rgb(46, 46, 46)",gray19:"rgb(48, 48, 48)",gray2:"rgb(5, 5, 5)",gray20:"rgb(51, 51, 51)",gray21:"rgb(54, 54, 54)",gray22:"rgb(56, 56, 56)",gray23:"rgb(59, 59, 59)",gray24:"rgb(61, 61, 61)",gray25:"rgb(64, 64, 64)",gray26:"rgb(66, 66, 66)",gray27:"rgb(69, 69, 69)",gray28:"rgb(71, 71, 71)",gray29:"rgb(74, 74, 74)",gray3:"rgb(8, 8, 8)",gray30:"rgb(77, 77, 77)",gray31:"rgb(79, 79, 79)",gray32:"rgb(82, 82, 82)",gray33:"rgb(84, 84, 84)",gray34:"rgb(87, 87, 87)",gray35:"rgb(89, 89, 89)",gray36:"rgb(92, 92, 92)",gray37:"rgb(94, 94, 94)",gray38:"rgb(97, 97, 97)",gray39:"rgb(99, 99, 99)",gray4:"rgb(10, 10, 10)",gray40:"rgb(102, 102, 102)",gray41:"rgb(105, 105, 105)",gray42:"rgb(107, 107, 107)",gray43:"rgb(110, 110, 110)",gray44:"rgb(112, 112, 112)",gray45:"rgb(115, 115, 115)",gray46:"rgb(117, 117, 117)",gray47:"rgb(120, 120, 120)",gray48:"rgb(122, 122, 122)",gray49:"rgb(125, 125, 125)",gray5:"rgb(13, 13, 13)",gray50:"rgb(127, 127, 127)",gray51:"rgb(130, 130, 130)",gray52:"rgb(133, 133, 133)",gray53:"rgb(135, 135, 135)",gray54:"rgb(138, 138, 138)",gray55:"rgb(140, 140, 140)",gray56:"rgb(143, 143, 143)",gray57:"rgb(145, 145, 145)",gray58:"rgb(148, 148, 148)",gray59:"rgb(150, 150, 150)",gray6:"rgb(15, 15, 15)",gray60:"rgb(153, 153, 153)",gray61:"rgb(156, 156, 156)",gray62:"rgb(158, 158, 158)",gray63:"rgb(161, 161, 161)",gray64:"rgb(163, 163, 163)",gray65:"rgb(166, 166, 166)",gray66:"rgb(168, 168, 168)",gray67:"rgb(171, 171, 171)",gray68:"rgb(173, 173, 173)",gray69:"rgb(176, 176, 176)",gray7:"rgb(18, 18, 18)",gray70:"rgb(179, 179, 179)",gray71:"rgb(181, 181, 181)",gray72:"rgb(184, 184, 184)",gray73:"rgb(186, 186, 186)",gray74:"rgb(189, 189, 189)",gray75:"rgb(191, 191, 191)",gray76:"rgb(194, 194, 194)",gray77:"rgb(196, 196, 196)",gray78:"rgb(199, 199, 199)",gray79:"rgb(201, 201, 201)",gray8:"rgb(20, 20, 20)",gray80:"rgb(204, 204, 204)",gray81:"rgb(207, 207, 207)",gray82:"rgb(209, 209, 209)",gray83:"rgb(212, 212, 212)",gray84:"rgb(214, 214, 214)",gray85:"rgb(217, 217, 217)",gray86:"rgb(219, 219, 219)",gray87:"rgb(222, 222, 222)",gray88:"rgb(224, 224, 224)",gray89:"rgb(227, 227, 227)",gray9:"rgb(23, 23, 23)",gray90:"rgb(229, 229, 229)",gray91:"rgb(232, 232, 232)",gray92:"rgb(235, 235, 235)",gray93:"rgb(237, 237, 237)",gray94:"rgb(240, 240, 240)",gray95:"rgb(242, 242, 242)",gray96:"rgb(245, 245, 245)",gray97:"rgb(247, 247, 247)",gray98:"rgb(250, 250, 250)",gray99:"rgb(252, 252, 252)",green:"rgb(0, 255, 0)",green1:"rgb(0, 255, 0)",green2:"rgb(0, 238, 0)",green3:"rgb(0, 205, 0)",green4:"rgb(0, 139, 0)",greenyellow:"rgb(173, 255, 47)",grey:"rgb(190, 190, 190)",grey0:"rgb(0, 0, 0)",grey1:"rgb(3, 3, 3)",grey10:"rgb(26, 26, 26)",grey100:"rgb(255, 255, 255)",grey11:"rgb(28, 28, 28)",grey12:"rgb(31, 31, 31)",grey13:"rgb(33, 33, 33)",grey14:"rgb(36, 36, 36)",grey15:"rgb(38, 38, 38)",grey16:"rgb(41, 41, 41)",grey17:"rgb(43, 43, 43)",grey18:"rgb(46, 46, 46)",grey19:"rgb(48, 48, 48)",grey2:"rgb(5, 5, 5)",grey20:"rgb(51, 51, 51)",grey21:"rgb(54, 54, 54)",grey22:"rgb(56, 56, 56)",grey23:"rgb(59, 59, 59)",grey24:"rgb(61, 61, 61)",grey25:"rgb(64, 64, 64)",grey26:"rgb(66, 66, 66)",grey27:"rgb(69, 69, 69)",grey28:"rgb(71, 71, 71)",grey29:"rgb(74, 74, 74)",grey3:"rgb(8, 8, 8)",grey30:"rgb(77, 77, 77)",grey31:"rgb(79, 79, 79)",grey32:"rgb(82, 82, 82)",grey33:"rgb(84, 84, 84)",grey34:"rgb(87, 87, 87)",grey35:"rgb(89, 89, 89)",grey36:"rgb(92, 92, 92)",grey37:"rgb(94, 94, 94)",grey38:"rgb(97, 97, 97)",grey39:"rgb(99, 99, 99)",grey4:"rgb(10, 10, 10)",grey40:"rgb(102, 102, 102)",grey41:"rgb(105, 105, 105)",grey42:"rgb(107, 107, 107)",grey43:"rgb(110, 110, 110)",grey44:"rgb(112, 112, 112)",grey45:"rgb(115, 115, 115)",grey46:"rgb(117, 117, 117)",grey47:"rgb(120, 120, 120)",grey48:"rgb(122, 122, 122)",grey49:"rgb(125, 125, 125)",grey5:"rgb(13, 13, 13)",grey50:"rgb(127, 127, 127)",grey51:"rgb(130, 130, 130)",grey52:"rgb(133, 133, 133)",grey53:"rgb(135, 135, 135)",grey54:"rgb(138, 138, 138)",grey55:"rgb(140, 140, 140)",grey56:"rgb(143, 143, 143)",grey57:"rgb(145, 145, 145)",grey58:"rgb(148, 148, 148)",grey59:"rgb(150, 150, 150)",grey6:"rgb(15, 15, 15)",grey60:"rgb(153, 153, 153)",grey61:"rgb(156, 156, 156)",grey62:"rgb(158, 158, 158)",grey63:"rgb(161, 161, 161)",grey64:"rgb(163, 163, 163)",grey65:"rgb(166, 166, 166)",grey66:"rgb(168, 168, 168)",grey67:"rgb(171, 171, 171)",grey68:"rgb(173, 173, 173)",grey69:"rgb(176, 176, 176)",grey7:"rgb(18, 18, 18)",grey70:"rgb(179, 179, 179)",grey71:"rgb(181, 181, 181)",grey72:"rgb(184, 184, 184)",grey73:"rgb(186, 186, 186)",grey74:"rgb(189, 189, 189)",grey75:"rgb(191, 191, 191)",grey76:"rgb(194, 194, 194)",grey77:"rgb(196, 196, 196)",grey78:"rgb(199, 199, 199)",grey79:"rgb(201, 201, 201)",grey8:"rgb(20, 20, 20)",grey80:"rgb(204, 204, 204)",grey81:"rgb(207, 207, 207)",grey82:"rgb(209, 209, 209)",grey83:"rgb(212, 212, 212)",grey84:"rgb(214, 214, 214)",grey85:"rgb(217, 217, 217)",grey86:"rgb(219, 219, 219)",grey87:"rgb(222, 222, 222)",grey88:"rgb(224, 224, 224)",grey89:"rgb(227, 227, 227)",grey9:"rgb(23, 23, 23)",grey90:"rgb(229, 229, 229)",grey91:"rgb(232, 232, 232)",grey92:"rgb(235, 235, 235)",grey93:"rgb(237, 237, 237)",grey94:"rgb(240, 240, 240)",grey95:"rgb(242, 242, 242)",grey96:"rgb(245, 245, 245)",grey97:"rgb(247, 247, 247)",grey98:"rgb(250, 250, 250)",grey99:"rgb(252, 252, 252)",honeydew:"rgb(240, 255, 240)",honeydew1:"rgb(240, 255, 240)",honeydew2:"rgb(224, 238, 224)",honeydew3:"rgb(193, 205, 193)",honeydew4:"rgb(131, 139, 131)",hotpink:"rgb(255, 105, 180)",hotpink1:"rgb(255, 110, 180)",hotpink2:"rgb(238, 106, 167)",hotpink3:"rgb(205, 96, 144)",hotpink4:"rgb(139, 58, 98)",indianred:"rgb(205, 92, 92)",indianred1:"rgb(255, 106, 106)",indianred2:"rgb(238, 99, 99)",indianred3:"rgb(205, 85, 85)",indianred4:"rgb(139, 58, 58)",ivory:"rgb(255, 255, 240)",ivory1:"rgb(255, 255, 240)",ivory2:"rgb(238, 238, 224)",ivory3:"rgb(205, 205, 193)",ivory4:"rgb(139, 139, 131)",khaki:"rgb(240, 230, 140)",khaki1:"rgb(255, 246, 143)",khaki2:"rgb(238, 230, 133)",khaki3:"rgb(205, 198, 115)",khaki4:"rgb(139, 134, 78)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lavenderblush1:"rgb(255, 240, 245)",lavenderblush2:"rgb(238, 224, 229)",lavenderblush3:"rgb(205, 193, 197)",lavenderblush4:"rgb(139, 131, 134)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lemonchiffon1:"rgb(255, 250, 205)",lemonchiffon2:"rgb(238, 233, 191)",lemonchiffon3:"rgb(205, 201, 165)",lemonchiffon4:"rgb(139, 137, 112)",lightblue:"rgb(173, 216, 230)",lightblue1:"rgb(191, 239, 255)",lightblue2:"rgb(178, 223, 238)",lightblue3:"rgb(154, 192, 205)",lightblue4:"rgb(104, 131, 139)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightcyan1:"rgb(224, 255, 255)",lightcyan2:"rgb(209, 238, 238)",lightcyan3:"rgb(180, 205, 205)",lightcyan4:"rgb(122, 139, 139)",lightgoldenrod:"rgb(238, 221, 130)",lightgoldenrod1:"rgb(255, 236, 139)",lightgoldenrod2:"rgb(238, 220, 130)",lightgoldenrod3:"rgb(205, 190, 112)",lightgoldenrod4:"rgb(139, 129, 76)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgray:"rgb(211, 211, 211)",lightgreen:"rgb(144, 238, 144)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightpink1:"rgb(255, 174, 185)",lightpink2:"rgb(238, 162, 173)",lightpink3:"rgb(205, 140, 149)",lightpink4:"rgb(139, 95, 101)",lightsalmon:"rgb(255, 160, 122)",lightsalmon1:"rgb(255, 160, 122)",lightsalmon2:"rgb(238, 149, 114)",lightsalmon3:"rgb(205, 129, 98)",lightsalmon4:"rgb(139, 87, 66)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightskyblue1:"rgb(176, 226, 255)",lightskyblue2:"rgb(164, 211, 238)",lightskyblue3:"rgb(141, 182, 205)",lightskyblue4:"rgb(96, 123, 139)",lightslateblue:"rgb(132, 112, 255)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightsteelblue1:"rgb(202, 225, 255)",lightsteelblue2:"rgb(188, 210, 238)",lightsteelblue3:"rgb(162, 181, 205)",lightsteelblue4:"rgb(110, 123, 139)",lightyellow:"rgb(255, 255, 224)",lightyellow1:"rgb(255, 255, 224)",lightyellow2:"rgb(238, 238, 209)",lightyellow3:"rgb(205, 205, 180)",lightyellow4:"rgb(139, 139, 122)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",magenta1:"rgb(255, 0, 255)",magenta2:"rgb(238, 0, 238)",magenta3:"rgb(205, 0, 205)",magenta4:"rgb(139, 0, 139)",maroon:"rgb(176, 48, 96)",maroon1:"rgb(255, 52, 179)",maroon2:"rgb(238, 48, 167)",maroon3:"rgb(205, 41, 144)",maroon4:"rgb(139, 28, 98)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumorchid1:"rgb(224, 102, 255)",mediumorchid2:"rgb(209, 95, 238)",mediumorchid3:"rgb(180, 82, 205)",mediumorchid4:"rgb(122, 55, 139)",mediumpurple:"rgb(147, 112, 219)",mediumpurple1:"rgb(171, 130, 255)",mediumpurple2:"rgb(159, 121, 238)",mediumpurple3:"rgb(137, 104, 205)",mediumpurple4:"rgb(93, 71, 139)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",mistyrose1:"rgb(255, 228, 225)",mistyrose2:"rgb(238, 213, 210)",mistyrose3:"rgb(205, 183, 181)",mistyrose4:"rgb(139, 125, 123)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navajowhite1:"rgb(255, 222, 173)",navajowhite2:"rgb(238, 207, 161)",navajowhite3:"rgb(205, 179, 139)",navajowhite4:"rgb(139, 121, 94)",navy:"rgb(0, 0, 128)",navyblue:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olivedrab:"rgb(107, 142, 35)",olivedrab1:"rgb(192, 255, 62)",olivedrab2:"rgb(179, 238, 58)",olivedrab3:"rgb(154, 205, 50)",olivedrab4:"rgb(105, 139, 34)",orange:"rgb(255, 165, 0)",orange1:"rgb(255, 165, 0)",orange2:"rgb(238, 154, 0)",orange3:"rgb(205, 133, 0)",orange4:"rgb(139, 90, 0)",orangered:"rgb(255, 69, 0)",orangered1:"rgb(255, 69, 0)",orangered2:"rgb(238, 64, 0)",orangered3:"rgb(205, 55, 0)",orangered4:"rgb(139, 37, 0)",orchid:"rgb(218, 112, 214)",orchid1:"rgb(255, 131, 250)",orchid2:"rgb(238, 122, 233)",orchid3:"rgb(205, 105, 201)",orchid4:"rgb(139, 71, 137)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",palegreen1:"rgb(154, 255, 154)",palegreen2:"rgb(144, 238, 144)",palegreen3:"rgb(124, 205, 124)",palegreen4:"rgb(84, 139, 84)",paleturquoise:"rgb(175, 238, 238)",paleturquoise1:"rgb(187, 255, 255)",paleturquoise2:"rgb(174, 238, 238)",paleturquoise3:"rgb(150, 205, 205)",paleturquoise4:"rgb(102, 139, 139)",palevioletred:"rgb(219, 112, 147)",palevioletred1:"rgb(255, 130, 171)",palevioletred2:"rgb(238, 121, 159)",palevioletred3:"rgb(205, 104, 137)",palevioletred4:"rgb(139, 71, 93)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peachpuff1:"rgb(255, 218, 185)",peachpuff2:"rgb(238, 203, 173)",peachpuff3:"rgb(205, 175, 149)",peachpuff4:"rgb(139, 119, 101)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",pink1:"rgb(255, 181, 197)",pink2:"rgb(238, 169, 184)",pink3:"rgb(205, 145, 158)",pink4:"rgb(139, 99, 108)",plum:"rgb(221, 160, 221)",plum1:"rgb(255, 187, 255)",plum2:"rgb(238, 174, 238)",plum3:"rgb(205, 150, 205)",plum4:"rgb(139, 102, 139)",powderblue:"rgb(176, 224, 230)",purple:"rgb(160, 32, 240)",purple1:"rgb(155, 48, 255)",purple2:"rgb(145, 44, 238)",purple3:"rgb(125, 38, 205)",purple4:"rgb(85, 26, 139)",red:"rgb(255, 0, 0)",red1:"rgb(255, 0, 0)",red2:"rgb(238, 0, 0)",red3:"rgb(205, 0, 0)",red4:"rgb(139, 0, 0)",rosybrown:"rgb(188, 143, 143)",rosybrown1:"rgb(255, 193, 193)",rosybrown2:"rgb(238, 180, 180)",rosybrown3:"rgb(205, 155, 155)",rosybrown4:"rgb(139, 105, 105)",royalblue:"rgb(65, 105, 225)",royalblue1:"rgb(72, 118, 255)",royalblue2:"rgb(67, 110, 238)",royalblue3:"rgb(58, 95, 205)",royalblue4:"rgb(39, 64, 139)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",salmon1:"rgb(255, 140, 105)",salmon2:"rgb(238, 130, 98)",salmon3:"rgb(205, 112, 84)",salmon4:"rgb(139, 76, 57)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seagreen1:"rgb(84, 255, 159)",seagreen2:"rgb(78, 238, 148)",seagreen3:"rgb(67, 205, 128)",seagreen4:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",seashell1:"rgb(255, 245, 238)",seashell2:"rgb(238, 229, 222)",seashell3:"rgb(205, 197, 191)",seashell4:"rgb(139, 134, 130)",sienna:"rgb(160, 82, 45)",sienna1:"rgb(255, 130, 71)",sienna2:"rgb(238, 121, 66)",sienna3:"rgb(205, 104, 57)",sienna4:"rgb(139, 71, 38)",skyblue:"rgb(135, 206, 235)",skyblue1:"rgb(135, 206, 255)",skyblue2:"rgb(126, 192, 238)",skyblue3:"rgb(108, 166, 205)",skyblue4:"rgb(74, 112, 139)",slateblue:"rgb(106, 90, 205)",slateblue1:"rgb(131, 111, 255)",slateblue2:"rgb(122, 103, 238)",slateblue3:"rgb(105, 89, 205)",slateblue4:"rgb(71, 60, 139)",slategray:"rgb(112, 128, 144)",slategray1:"rgb(198, 226, 255)",slategray2:"rgb(185, 211, 238)",slategray3:"rgb(159, 182, 205)",slategray4:"rgb(108, 123, 139)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",snow1:"rgb(255, 250, 250)",snow2:"rgb(238, 233, 233)",snow3:"rgb(205, 201, 201)",snow4:"rgb(139, 137, 137)",springgreen:"rgb(0, 255, 127)",springgreen1:"rgb(0, 255, 127)",springgreen2:"rgb(0, 238, 118)",springgreen3:"rgb(0, 205, 102)",springgreen4:"rgb(0, 139, 69)",steelblue:"rgb(70, 130, 180)",steelblue1:"rgb(99, 184, 255)",steelblue2:"rgb(92, 172, 238)",steelblue3:"rgb(79, 148, 205)",steelblue4:"rgb(54, 100, 139)",tan:"rgb(210, 180, 140)",tan1:"rgb(255, 165, 79)",tan2:"rgb(238, 154, 73)",tan3:"rgb(205, 133, 63)",tan4:"rgb(139, 90, 43)",thistle:"rgb(216, 191, 216)",thistle1:"rgb(255, 225, 255)",thistle2:"rgb(238, 210, 238)",thistle3:"rgb(205, 181, 205)",thistle4:"rgb(139, 123, 139)",tomato:"rgb(255, 99, 71)",tomato1:"rgb(255, 99, 71)",tomato2:"rgb(238, 92, 66)",tomato3:"rgb(205, 79, 57)",tomato4:"rgb(139, 54, 38)",turquoise:"rgb(64, 224, 208)",turquoise1:"rgb(0, 245, 255)",turquoise2:"rgb(0, 229, 238)",turquoise3:"rgb(0, 197, 205)",turquoise4:"rgb(0, 134, 139)",violet:"rgb(238, 130, 238)",violetred:"rgb(208, 32, 144)",violetred1:"rgb(255, 62, 150)",violetred2:"rgb(238, 58, 140)",violetred3:"rgb(205, 50, 120)",violetred4:"rgb(139, 34, 82)",wheat:"rgb(245, 222, 179)",wheat1:"rgb(255, 231, 186)",wheat2:"rgb(238, 216, 174)",wheat3:"rgb(205, 186, 150)",wheat4:"rgb(139, 126, 102)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellow1:"rgb(255, 255, 0)",yellow2:"rgb(238, 238, 0)",yellow3:"rgb(205, 205, 0)",yellow4:"rgb(139, 139, 0)",yellowgreen:"rgb(154, 205, 50)"},lib.CredentialCache=function(){this.cache_=null,this.cryptoKey_=null,this.enabled_=null,window.chrome&&chrome.idle&&chrome.idle.onStateChanged.addListener(r=>{"locked"===r&&this.clear_()})},lib.CredentialCache.prototype.init_=async function(){this.cache_={},this.cryptoKey_=await window.crypto.subtle.generateKey({name:"AES-CBC",length:128},!1,["encrypt","decrypt"])},lib.CredentialCache.prototype.clear_=function(){this.cache_=null,this.cryptoKey_=null,this.enabled_=null},lib.CredentialCache.prototype.retrieve=async function(r){if(this.cache_||await this.init_(),r in this.cache_){const{encryptedData:e,iv:t}=this.cache_[r];return delete this.cache_[r],new Uint8Array(await window.crypto.subtle.decrypt({name:"AES-CBC",iv:t},lib.notNull(this.cryptoKey_),e))}return null},lib.CredentialCache.prototype.store=async function(r,e){this.cache_||await this.init_();const t=window.crypto.getRandomValues(new Uint8Array(16)),i=await window.crypto.subtle.encrypt({name:"AES-CBC",iv:t},lib.notNull(this.cryptoKey_),e.buffer);e.fill(0),this.cache_[r]={encryptedData:i,iv:t}},lib.CredentialCache.prototype.isEnabled=function(){return this.enabled_},lib.CredentialCache.prototype.setEnabled=function(r){null===this.enabled_&&(this.enabled_=r)},lib.Event=function(){const r=function(...e){r.observers.forEach(r=>r.apply(null,e))};return r.addListener=function(e){r.observers.push(e)},r.removeListener=function(e){r.observers=r.observers.filter(r=>r!==e)},r.observers=[],r},lib.f={},lib.f.replaceVars=function(r,e){return r.replace(/%([a-z]*)\(([^\)]+)\)/gi,(function(r,t,i){if(void 0===e[i])throw"Unknown variable: "+i;var o=e[i];if(t in lib.f.replaceVars.functions)o=lib.f.replaceVars.functions[t](o);else if(t)throw"Unknown escape function: "+t;return o}))},lib.f.replaceVars.functions={encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escapeHTML:function(r){var e={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};return r.replace(/[<>&\"\']/g,r=>e[r])}},lib.f.getURL=function(r){return lib.f.getURL.chromeSupported()?chrome.runtime.getURL(r):r},lib.f.getURL.chromeSupported=function(){return window.chrome&&chrome.runtime&&chrome.runtime.getURL},lib.f.clamp=function(r,e,t){return r<e?e:r>t?t:r},lib.f.zpad=function(r,e){return String(r).padStart(e,"0")},lib.f.getStack=function(r=0,e){const t=(new Error).stack.split("\n");r+=2;const i=t.length-r;e=void 0===e?i:lib.f.clamp(e,0,i);const o=new Array;for(let i=r;i<e+r;++i)o.push(t[i].replace(/^\s*at\s+/,""));return o},lib.f.smartFloorDivide=function(r,e){var t=r/e,i=Math.ceil(t);return i-t<1e-4?i:Math.floor(t)},lib.f.randomInt=function(r,e){return Math.floor(Math.random()*(e-r+1))+r},lib.f.getOs=function(){if(window.browser&&browser.runtime&&browser.runtime.getPlatformInfo)return browser.runtime.getPlatformInfo().then(r=>r.os);if(window.chrome&&chrome.runtime&&chrome.runtime.getPlatformInfo)return new Promise((r,e)=>chrome.runtime.getPlatformInfo(e=>r(e.os)));if(window.navigator&&navigator.userAgent){const r=navigator.userAgent;if(r.includes("Mac OS X"))return Promise.resolve("mac");if(r.includes("CrOS"))return Promise.resolve("cros");if(r.includes("Linux"))return Promise.resolve("linux");if(r.includes("Android"))return Promise.resolve("android");if(r.includes("Windows"))return Promise.resolve("windows")}return"undefined"!=typeof process?Promise.resolve("node"):Promise.reject(null)},lib.f.getChromeMilestone=function(){if(window.navigator&&navigator.userAgent){const r=navigator.userAgent.match(/\sChrome\/(\d+)/);if(r)return parseInt(r[1],10)}return NaN},lib.f.lastError=function(r=null){let e;return window.browser&&browser.runtime?e=browser.runtime.lastError:window.chrome&&chrome.runtime&&(e=chrome.runtime.lastError),e&&e.message?e.message:r},lib.f.openWindow=function(r,e,t){const i=window.open(void 0,e,t);return null!==i&&(i.opener=null,r&&(i.location=r)),i},lib.fs={},lib.fs.log=function(r,e){return function(...t){console.log(r+": "+t.join(", ")),e&&e.apply(null,t)}},lib.fs.err=function(r,e){return function(...t){console.error(r+": "+t.join(", "),lib.f.getStack()),e&&e.apply(null,t)}},lib.fs.overwriteFile=function(r,e,t){return t instanceof Blob||(t=new Blob([t],{type:"text/plain"})),lib.fs.removeFile(r,e).catch(()=>{}).then(()=>lib.fs.getOrCreateFile(r,e)).then(r=>new Promise((e,i)=>{r.createWriter(r=>{r.onwriteend=e,r.onerror=i,r.write(t)},i)}))},lib.fs.openFile=function(r,e){return new Promise((t,i)=>{r.getFile(e,{create:!1},r=>{r.file(t,i)},i)})},lib.fs.readFile=function(r,e){return lib.fs.openFile(r,e).then(r=>{return(new lib.fs.FileReader).readAsText(r)})},lib.fs.removeFile=function(r,e){return new Promise((t,i)=>{r.getFile(e,{},r=>r.remove(t,i),i)})},lib.fs.readDirectory=function(r,e){return new Promise((t,i)=>{r.getDirectory(e,{create:!1},r=>{r.createReader().readEntries(t,i)},i)})},lib.fs.getOrCreateFile=function(r,e){var t=null,i=null;function o(r){return new Promise((e,t)=>{r.getFile(lib.notNull(i),{create:!0},e,t)})}var n=e.lastIndexOf("/");return n>-1?(t=e.substr(0,n),i=e.substr(n+1)):i=e,t?lib.fs.getOrCreateDirectory(r,t).then(o):o(r)},lib.fs.getOrCreateDirectory=function(r,e){const t=e.split("/");return new Promise((e,i)=>{!function r(o){if(!t.length)return e(o);const n=t.shift();n&&"."!=n?o.getDirectory(n,{create:!0},r,i):r(o)}(r)})},lib.fs.FileReader=function(){},lib.fs.FileReader.prototype.readAs_=function(r,e){return new Promise((t,i)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onabort=o.onerror=()=>i(o),o[e](r)})},lib.fs.FileReader.prototype.readAsArrayBuffer=function(r){return this.readAs_(r,"readAsArrayBuffer")},lib.fs.FileReader.prototype.readAsBinaryString=function(r){return this.readAs_(r,"readAsBinaryString")},lib.fs.FileReader.prototype.readAsDataURL=function(r){return this.readAs_(r,"readAsDataURL")},lib.fs.FileReader.prototype.readAsText=function(r){return this.readAs_(r,"readAsText")},lib.i18n={},lib.i18n.browser_=window.browser&&browser.i18n?browser.i18n:window.chrome&&chrome.i18n?chrome.i18n:null,lib.i18n.browserSupported=function(){return null!==lib.i18n.browser_},lib.i18n.getAcceptLanguages=function(r){lib.i18n.browser_?lib.i18n.browser_.getAcceptLanguages(r):setTimeout((function(){r([navigator.language.replace(/-/g,"_")])}),0)},lib.i18n.getMessage=function(r,e=[],t=""){if(lib.i18n.browser_){const t=lib.i18n.browser_.getMessage(r,e);if(t)return t}return lib.i18n.replaceReferences(t,e)},lib.i18n.replaceReferences=function(r,e=[]){return null===e&&(e=[]),e instanceof Array||(e=[e]),r.replace(/\$(\d+)/g,(r,t)=>t<=e.length?e[t-1]:"")},lib.MessageManager=function(r,e=!1){this.languages_=r.map(r=>r.replace(/-/g,"_")),-1==this.languages_.indexOf("en")&&this.languages_.push("en"),this.useCrlf=e,this.messages_={}},lib.MessageManager.Messages,lib.MessageManager.prototype.addMessages=function(r){for(var e in r){var t=r[e];t.placeholders?this.messages_[e.toUpperCase()]=t.message.replace(/\$([a-z][^\s\$]+)\$/gi,(function(t,i){return r[e].placeholders[i.toLowerCase()].content})):this.messages_[e.toUpperCase()]=t.message}},lib.MessageManager.prototype.findAndLoadMessages=async function(r){if(!lib.i18n.browserSupported())for(const e of this.languages_){const t=lib.i18n.replaceReferences(r,e);try{return void await this.loadMessages(t)}catch(r){console.warn(`Error fetching ${e} messages at ${t}`,r,"Trying all languages:",this.languages_)}}},lib.MessageManager.prototype.loadMessages=function(r){return new Promise((e,t)=>{const i=new XMLHttpRequest;i.onload=()=>{try{this.addMessages(JSON.parse(i.responseText)),e()}catch(r){t(r)}},i.onerror=()=>t(i),i.open("GET",r),i.send()})},lib.MessageManager.prototype.get=function(r,e,t){let i=lib.i18n.getMessage(r,e);return i||((i=this.messages_[r])||(console.warn("Unknown message: "+r),i=void 0===t?r:t,this.messages_[r]=i),i=lib.i18n.replaceReferences(i,e)),this.useCrlf&&(i=i.replace(/\n/g,"\r\n")),i},lib.MessageManager.prototype.processI18nAttributes=function(r){for(var e=r.querySelectorAll("[i18n]"),t=0;t<e.length;t++)this.processI18nAttribute(e[t])},lib.MessageManager.prototype.processI18nAttribute=function(r){const e=r=>r.replace(/-/g,"_").toUpperCase();var t=r.getAttribute("i18n");if(t){try{t=JSON.parse(t)}catch(e){throw console.error("Can't parse "+r.tagName+"#"+r.id+": "+t),e}for(var i in t){var o=i,n=t[i];n.startsWith("=")&&(i=n.substr(1),n=t[i]),n.startsWith("$")&&(n=e(r.getAttribute(n.substr(1))+"_"+i));var g=this.get(n);"_"==o?r.textContent=g:r.setAttribute(o,g)}}},lib.PreferenceManager=function(r,e="/"){this.storage=r,this.storageObserver_=this.onStorageChange_.bind(this),this.isActive_=!1,this.activate(),this.trace=!1,e.endsWith("/")||(e+="/"),this.prefix=e,this.isImportingJson_=!1,this.prefRecords_={},this.globalObservers_=[],this.childFactories_={},this.childLists_={}},lib.PreferenceManager.prototype.DEFAULT_VALUE=Symbol("DEFAULT_VALUE"),lib.PreferenceManager.Record=function(r,e){this.name=r,this.defaultValue=e,this.currentValue=this.DEFAULT_VALUE,this.observers=[]},lib.PreferenceManager.Record.prototype.DEFAULT_VALUE=lib.PreferenceManager.prototype.DEFAULT_VALUE,lib.PreferenceManager.Record.prototype.addObserver=function(r){this.observers.push(r)},lib.PreferenceManager.Record.prototype.removeObserver=function(r){var e=this.observers.indexOf(r);e>=0&&this.observers.splice(e,1)},lib.PreferenceManager.Record.prototype.get=function(){return this.currentValue===this.DEFAULT_VALUE?/^(string|number)$/.test(typeof this.defaultValue)?this.defaultValue:"object"==typeof this.defaultValue?JSON.parse(JSON.stringify(this.defaultValue)):this.defaultValue:this.currentValue},lib.PreferenceManager.prototype.deactivate=function(){if(!this.isActive_)throw new Error("Not activated");this.isActive_=!1,this.storage.removeObserver(this.storageObserver_)},lib.PreferenceManager.prototype.activate=function(){if(this.isActive_)throw new Error("Already activated");this.isActive_=!0,this.storage.addObserver(this.storageObserver_)},lib.PreferenceManager.prototype.readStorage=function(r){var e=0;function t(){0==--e&&r&&r()}var i=Object.keys(this.prefRecords_).map(r=>this.prefix+r);this.trace&&console.log("Preferences read: "+this.prefix),this.storage.getItems(i,function(i){var o=this.prefix.length;for(var n in i){var g=i[n],s=n.substr(o),a=s in this.childLists_&&JSON.stringify(g)!=JSON.stringify(this.prefRecords_[s].currentValue);this.prefRecords_[s].currentValue=g,a&&(e++,this.syncChildList(s,t))}0==e&&r&&setTimeout(r)}.bind(this))},lib.PreferenceManager.prototype.definePreference=function(r,e,t){var i=this.prefRecords_[r];i?this.changeDefault(r,e):i=this.prefRecords_[r]=new lib.PreferenceManager.Record(r,e),t&&i.addObserver(t)},lib.PreferenceManager.prototype.definePreferences=function(r){for(var e=0;e<r.length;e++)this.definePreference(r[e][0],r[e][1],r[e][2])},lib.PreferenceManager.prototype.defineChildren=function(r,e){this.definePreference(r,[],this.onChildListChange_.bind(this,r)),this.childFactories_[r]=e,this.childLists_[r]={}},lib.PreferenceManager.prototype.addObserver=function(r,e){if(!(r in this.prefRecords_))throw new Error(`Unknown preference: ${r}`);this.prefRecords_[r].addObserver(e)},lib.PreferenceManager.prototype.addObservers=function(r,e){if(r&&"function"!=typeof r)throw new Error("Invalid param: globals");if(r&&this.globalObservers_.push(r),e)for(var t in e)this.addObserver(t,e[t])},lib.PreferenceManager.prototype.removeObserver=function(r,e){if(!(r in this.prefRecords_))throw new Error(`Unknown preference: ${r}`);this.prefRecords_[r].removeObserver(e)},lib.PreferenceManager.prototype.notifyAll=function(){for(var r in this.prefRecords_)this.notifyChange_(r)},lib.PreferenceManager.prototype.notifyChange_=function(r){var e=this.prefRecords_[r];if(!e)throw new Error("Unknown preference: "+r);for(var t=e.get(),i=0;i<this.globalObservers_.length;i++)this.globalObservers_[i](r,t);for(i=0;i<e.observers.length;i++)e.observers[i](t,r,this)},lib.PreferenceManager.prototype.createChild=function(r,e,t){var i,o=this.get(r);if(t){if(i=t,-1!=o.indexOf(i))throw new Error("Duplicate child: "+r+": "+i)}else for(;!i||-1!=o.indexOf(i);)i=lib.f.randomInt(1,65535).toString(16),i=lib.f.zpad(i,4),e&&(i=e+":"+i);var n=this.childFactories_[r](this,i);return n.trace=this.trace,n.resetAll(),this.childLists_[r][i]=n,o.push(i),this.set(r,o,void 0,!this.isImportingJson_),n},lib.PreferenceManager.prototype.removeChild=function(r,e){this.getChild(r,e).resetAll();var t=this.get(r),i=t.indexOf(e);-1!=i&&(t.splice(i,1),this.set(r,t,void 0,!this.isImportingJson_)),delete this.childLists_[r][e]},lib.PreferenceManager.prototype.getChild=function(r,e,t){if(!(r in this.childLists_))throw new Error("Unknown child list: "+r);var i=this.childLists_[r];if(!(e in i)){if(void 0===t)throw new Error('Unknown "'+r+'" child: '+e);return t}return i[e]},lib.PreferenceManager.prototype.syncChildList=function(r,e){var t=0;function i(){0==--t&&e&&e()}for(var o=this.get(r),n=Object.keys(this.childLists_[r]),g=0;g<o.length;g++){var s=o[g],a=n.indexOf(s);if(a>=0&&n.splice(a,1),!this.childLists_[r][s]){var l=this.childFactories_[r](this,s);if(!l){console.warn("Unable to restore child: "+r+": "+s);continue}l.trace=this.trace,this.childLists_[r][s]=l,t++,l.readStorage(i)}}for(g=0;g<n.length;g++)delete this.childLists_[r][n[g]];!t&&e&&setTimeout(e)},lib.PreferenceManager.prototype.reset=function(r){var e=this.prefRecords_[r];if(!e)throw new Error("Unknown preference: "+r);this.storage.removeItem(this.prefix+r),e.currentValue!==this.DEFAULT_VALUE&&(e.currentValue=this.DEFAULT_VALUE,this.notifyChange_(r))},lib.PreferenceManager.prototype.resetAll=function(){var r=[];for(var e in this.childLists_){var t=this.childLists_[e];for(var i in t)t[i].resetAll()}for(var o in this.prefRecords_)this.prefRecords_[o].currentValue!==this.DEFAULT_VALUE&&(this.prefRecords_[o].currentValue=this.DEFAULT_VALUE,r.push(o));var n=Object.keys(this.prefRecords_).map(function(r){return this.prefix+r}.bind(this));this.storage.removeItems(n),r.forEach(this.notifyChange_.bind(this))},lib.PreferenceManager.prototype.diff=function(r,e){return typeof r!=typeof e||(/^(undefined|boolean|number|string)$/.test(typeof r)?r!==e:null!==r||null!==e)},lib.PreferenceManager.prototype.changeDefault=function(r,e){var t=this.prefRecords_[r];if(!t)throw new Error("Unknown preference: "+r);this.diff(t.defaultValue,e)&&(t.currentValue===this.DEFAULT_VALUE?(t.defaultValue=e,this.notifyChange_(r)):t.defaultValue=e)},lib.PreferenceManager.prototype.changeDefaults=function(r){for(var e in r)this.changeDefault(e,r[e])},lib.PreferenceManager.prototype.set=function(r,e,t,i=!0){var o=this.prefRecords_[r];if(!o)throw new Error("Unknown preference: "+r);var n=o.get();return this.diff(n,e)?(this.diff(o.defaultValue,e)?(o.currentValue=e,i&&this.storage.setItem(this.prefix+r,e,t)):(o.currentValue=this.DEFAULT_VALUE,i&&this.storage.removeItem(this.prefix+r,t)),Promise.resolve().then(()=>{this.notifyChange_(r)})):Promise.resolve()},lib.PreferenceManager.prototype.get=function(r){var e=this.prefRecords_[r];if(!e)throw new Error("Unknown preference: "+r);return e.get()},lib.PreferenceManager.prototype.getBoolean=function(r){const e=this.get(r);return lib.assert("boolean"==typeof e),e},lib.PreferenceManager.prototype.getNumber=function(r){const e=this.get(r);return lib.assert("number"==typeof e),e},lib.PreferenceManager.prototype.getString=function(r){const e=this.get(r);return lib.assert("string"==typeof e),e},lib.PreferenceManager.prototype.exportAsJson=function(){var r={};for(var e in this.prefRecords_)if(e in this.childLists_){r[e]=[];for(var t=this.get(e),i=0;i<t.length;i++){var o=t[i];r[e].push({id:o,json:this.getChild(e,o).exportAsJson()})}}else{var n=this.prefRecords_[e];n.currentValue!=this.DEFAULT_VALUE&&(r[e]=n.currentValue)}return r},lib.PreferenceManager.prototype.importFromJson=function(r,e){this.isImportingJson_=!0;let t=0;const i=()=>{if(--t<1){e&&e();for(let e in r)e in this.childLists_&&this.set(e,this.get(e));this.isImportingJson_=!1}};for(var o in r)if(o in this.childLists_)for(var n=r[o],g=0;g<n.length;g++){var s=n[g].id,a=this.childLists_[o][s];a||(a=this.createChild(o,null,s)),a.importFromJson(n[g].json,i),t++}else this.set(o,r[o]);0==t&&e&&e()},lib.PreferenceManager.prototype.onChildListChange_=function(r){this.syncChildList(r)},lib.PreferenceManager.prototype.onStorageChange_=function(r){for(var e in r)if(!this.prefix||0==e.lastIndexOf(this.prefix,0)){var t=e.substr(this.prefix.length);if(t in this.prefRecords_){var i=this.prefRecords_[t],o=r[e].newValue,n=i.currentValue;n===i.DEFAULT_VALUE&&(n=void 0),this.diff(n,o)&&(i.currentValue=null==o?i.DEFAULT_VALUE:o,this.notifyChange_(t))}}},lib.resource={resources_:{}},lib.resource.ResourceRecord,lib.resource.add=function(r,e,t){lib.resource.resources_[r]={type:e,name:r,data:t}},lib.resource.get=function(r,e){return r in lib.resource.resources_?lib.resource.resources_[r]:(lib.assert(void 0!==e),e)},lib.resource.getData=function(r,e){return r in lib.resource.resources_?lib.resource.resources_[r].data:e},lib.resource.getDataUrl=function(r,e){var t=lib.resource.get(r,e);return"data:"+t.type+","+t.data},lib.Storage=function(){},lib.Storage.prototype.addObserver=function(r){},lib.Storage.prototype.removeObserver=function(r){},lib.Storage.prototype.clear=function(r){},lib.Storage.prototype.getItem=function(r,e){},lib.Storage.prototype.getItems=function(r,e){},lib.Storage.prototype.setItem=function(r,e,t){},lib.Storage.prototype.setItems=function(r,e){},lib.Storage.prototype.removeItem=function(r,e){},lib.Storage.prototype.removeItems=function(r,e){},lib.Storage.Chrome=function(r){this.storage_=r,this.observers_=[],chrome.storage.onChanged.addListener(this.onChanged_.bind(this))},lib.Storage.Chrome.prototype.onChanged_=function(r,e){if(chrome.storage[e]==this.storage_)for(var t=0;t<this.observers_.length;t++)this.observers_[t](r)},lib.Storage.Chrome.prototype.addObserver=function(r){this.observers_.push(r)},lib.Storage.Chrome.prototype.removeObserver=function(r){var e=this.observers_.indexOf(r);-1!=e&&this.observers_.splice(e,1)},lib.Storage.Chrome.prototype.clear=function(r){this.storage_.clear(),r&&setTimeout(r,0)},lib.Storage.Chrome.prototype.getItem=function(r,e){this.storage_.get(r,e)},lib.Storage.Chrome.prototype.getItems=function(r,e){this.storage_.get(r,e)},lib.Storage.Chrome.prototype.setItem=function(r,e,t){const i=()=>{const o=lib.f.lastError();if(o){if(o.indexOf("MAX_WRITE_OPERATIONS"))return console.warn(`Will retry save of ${r} after exceeding quota: ${o}`),void setTimeout(()=>this.setItem(r,e,i),1e3);console.error(`Unknown runtime error: ${o}`)}t&&t()};var o={};o[r]=e,this.storage_.set(o,i)},lib.Storage.Chrome.prototype.setItems=function(r,e){this.storage_.set(r,e)},lib.Storage.Chrome.prototype.removeItem=function(r,e){this.storage_.remove(r,e)},lib.Storage.Chrome.prototype.removeItems=function(r,e){this.storage_.remove(r,e)},lib.Storage.Local=function(){this.observers_=[],this.storage_=window.localStorage,window.addEventListener("storage",this.onStorage_.bind(this))},lib.Storage.Local.prototype.onStorage_=function(r){if(r.storageArea==this.storage_){var e=r.oldValue?JSON.parse(r.oldValue):r.oldValue,t=r.newValue?JSON.parse(r.newValue):r.newValue,i={};i[r.key]={oldValue:e,newValue:t};for(var o=0;o<this.observers_.length;o++)this.observers_[o](i)}},lib.Storage.Local.prototype.addObserver=function(r){this.observers_.push(r)},lib.Storage.Local.prototype.removeObserver=function(r){var e=this.observers_.indexOf(r);-1!=e&&this.observers_.splice(e,1)},lib.Storage.Local.prototype.clear=function(r){this.storage_.clear(),r&&setTimeout(r,0)},lib.Storage.Local.prototype.getItem=function(r,e){var t=this.storage_.getItem(r);if("string"==typeof t)try{t=JSON.parse(t)}catch(r){}setTimeout(e.bind(null,t),0)},lib.Storage.Local.prototype.getItems=function(r,e){var t={};if(!r){r=[];for(let e=0;e<this.storage_.length;e++)r.push(this.storage_.key(e))}for(var i=r.length-1;i>=0;i--){var o=r[i],n=this.storage_.getItem(o);if("string"==typeof n)try{t[o]=JSON.parse(n)}catch(r){t[o]=n}else r.splice(i,1)}setTimeout(e.bind(null,t),0)},lib.Storage.Local.prototype.setItem=function(r,e,t){this.storage_.setItem(r,JSON.stringify(e)),t&&setTimeout(t,0)},lib.Storage.Local.prototype.setItems=function(r,e){for(var t in r)this.storage_.setItem(t,JSON.stringify(r[t]));e&&setTimeout(e,0)},lib.Storage.Local.prototype.removeItem=function(r,e){this.storage_.removeItem(r),e&&setTimeout(e,0)},lib.Storage.Local.prototype.removeItems=function(r,e){for(var t=0;t<r.length;t++)this.storage_.removeItem(r[t]);e&&setTimeout(e,0)},lib.Storage.Memory=function(){this.observers_=[],this.storage_={}},lib.Storage.Memory.prototype.addObserver=function(r){this.observers_.push(r)},lib.Storage.Memory.prototype.removeObserver=function(r){var e=this.observers_.indexOf(r);-1!=e&&this.observers_.splice(e,1)},lib.Storage.Memory.prototype.clear=function(r){var e={};for(var t in this.storage_)e[t]={oldValue:this.storage_[t],newValue:void 0};this.storage_={},setTimeout(function(){for(var r=0;r<this.observers_.length;r++)this.observers_[r](e)}.bind(this),0),r&&setTimeout(r,0)},lib.Storage.Memory.prototype.getItem=function(r,e){var t=this.storage_[r];if("string"==typeof t)try{t=JSON.parse(t)}catch(r){}setTimeout(e.bind(null,t),0)},lib.Storage.Memory.prototype.getItems=function(r,e){var t={};r||(r=Object.keys(this.storage_));for(var i=r.length-1;i>=0;i--){var o=r[i],n=this.storage_[o];if("string"==typeof n)try{t[o]=JSON.parse(n)}catch(r){t[o]=n}else r.splice(i,1)}setTimeout(e.bind(null,t),0)},lib.Storage.Memory.prototype.setItem=function(r,e,t){var i=this.storage_[r];this.storage_[r]=JSON.stringify(e);var o={};o[r]={oldValue:i,newValue:e},setTimeout(function(){for(var r=0;r<this.observers_.length;r++)this.observers_[r](o)}.bind(this),0),t&&setTimeout(t,0)},lib.Storage.Memory.prototype.setItems=function(r,e){var t={};for(var i in r)t[i]={oldValue:this.storage_[i],newValue:r[i]},this.storage_[i]=JSON.stringify(r[i]);setTimeout(function(){for(var r=0;r<this.observers_.length;r++)this.observers_[r](t)}.bind(this)),e&&setTimeout(e,0)},lib.Storage.Memory.prototype.removeItem=function(r,e){delete this.storage_[r],e&&setTimeout(e,0)},lib.Storage.Memory.prototype.removeItems=function(r,e){for(var t=0;t<r.length;t++)delete this.storage_[r[t]];e&&setTimeout(e,0)},function(r){if(r.TextEncoder&&r.TextDecoder)return!1;function e(r="utf-8"){if("utf-8"!==r)throw new RangeError("Failed to construct 'TextEncoder': "+`The encoding label provided ('${r}') is invalid.`)}function t(r="utf-8",e={fatal:!1}){if("utf-8"!==r)throw new RangeError("Failed to construct 'TextDecoder': "+`The encoding label provided ('${r}') is invalid.`);if(e.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(r,e={stream:!1}){if(e.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let t=0;const i=r.length;let o=0,n=Math.max(32,i+(i>>1)+7),g=new Uint8Array(n>>3<<3);for(;t<i;){let e=r.charCodeAt(t++);if(e>=55296&&e<=56319){if(t<i){const i=r.charCodeAt(t);56320==(64512&i)&&(++t,e=((1023&e)<<10)+(1023&i)+65536)}if(e>=55296&&e<=56319)continue}if(o+4>g.length){n+=8,n=(n*=1+t/r.length*2)>>3<<3;const e=new Uint8Array(n);e.set(g),g=e}if(0!=(4294967168&e)){if(0==(4294965248&e))g[o++]=e>>6&31|192;else if(0==(4294901760&e))g[o++]=e>>12&15|224,g[o++]=e>>6&63|128;else{if(0!=(4292870144&e))continue;g[o++]=e>>18&7|240,g[o++]=e>>12&63|128,g[o++]=e>>6&63|128}g[o++]=63&e|128}else g[o++]=e}return g.slice(0,o)},Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(t.prototype,"fatal",{value:!1}),Object.defineProperty(t.prototype,"ignoreBOM",{value:!1}),t.prototype.decode=function(r,e={stream:!1}){if(e.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const t=new Uint8Array(r);let i=0;const o=t.length,n=[];for(;i<o;){const r=t[i++];if(0===r)break;if(0==(128&r))n.push(r);else if(192==(224&r)){const e=63&t[i++];n.push((31&r)<<6|e)}else if(224==(240&r)){const e=63&t[i++],o=63&t[i++];n.push((31&r)<<12|e<<6|o)}else if(240==(248&r)){let e=(7&r)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++];e>65535&&(e-=65536,n.push(e>>>10&1023|55296),e=56320|1023&e),n.push(e)}}return String.fromCharCode.apply(null,n)},r.TextEncoder=e,r.TextDecoder=t}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this),function(r){if("Intl"in r&&"Segmenter"in r.Intl)return;r.Intl=r.Intl||{};const e=["grapheme","word","sentence","line"],t={grapheme:{grapheme:/^(.|\n)/},word:{letter:/^[a-z](?:'?[a-z])*/i,number:/^\d+([,.]\d+)*/},sentence:{terminator:/^[^.?!\r\n]+[.?!]+[\r\n]?/,separator:/^[^.?!\r\n]+[\r\n]?/},line:{hard:/^\S*[\r\n]/,soft:/^\S*\s*/}};function i(r,e){const t={none:0,number:100,letter:200,kana:300,ideo:400,unknown:-1}[r]||0;switch(e){case"character":return;case"word":return r;case"sentence":return{0:"terminator",100:"separator"}[t]||r;case"line":return{0:"soft",100:"hard"}[t]||r;default:return r}}class o{constructor(r,e){this._cur=-1,this._type=void 0,this._breaks=e}[Symbol.iterator](){return this}next(){return this._cur<this._breaks.length&&++this._cur,this._cur>=this._breaks.length?(this._type=void 0,{done:!0,value:void 0}):(this._type=this._breaks[this._cur].breakType,{done:!1,value:{segment:this._breaks[this._cur].segment,breakType:this._breaks[this._cur].breakType}})}following(r){if(!this._breaks.length)return!0;if(void 0===r)this._cur<this._breaks.length&&++this._cur;else for(this._cur=0;this._cur<this._breaks.length&&this._breaks[this._cur].pos<r;++this._cur);return this._type=this._cur<this._breaks.length?this._breaks[this._cur].breakType:void 0,this._cur+1>=this._breaks.length}preceding(r){if(!this._breaks.length)return!0;if(void 0===r)this._cur>=this._breaks.length&&--this._cur,this._cur>=0&&--this._cur;else for(this._cur=this._breaks.length-1;this._cur>=0&&this._breaks[this._cur].pos>=r;--this._cur);return this._type=this._cur+1>=this._breaks.length?void 0:this._breaks[this._cur+1].breakType,this._cur<0}get position(){return this._cur<0||!this._breaks.length?this._breaks.initial:this._cur>=this._breaks.length?this._breaks[this._breaks.length-1].pos:this._breaks[this._cur].pos}get breakType(){return this._type}}r.Intl.Segmenter=class{constructor(r,t){this._locale=Array.isArray(r)?r.map(r=>String(r)):String(r||navigator.language),t=Object.assign({granularity:"grapheme"},t),this._granularity=e.includes(t.granularity)?t.granularity:"grapheme"}segment(e){return new o(e,function(e,o,n){const g=[];if("v8BreakIterator"in r.Intl){"grapheme"===o&&(o="character");const t=new r.Intl.v8BreakIterator(e,{type:o});t.adoptText(n);let s=0,a=t.next();for(;-1!==a;)g.push({pos:t.current(),segment:n.slice(s,a),breakType:i(t.breakType(),o)}),s=a,a=t.next()}else{const r=t[o];let e=0;for(;e<n.length;){let t=!1;for(let i of Object.keys(r)){const s=r[i],a=n.slice(e).match(s);if(a){e+=a[0].length,g.push({pos:e,segment:a[0],breakType:"grapheme"===o?void 0:i}),t=!0;break}}t||g.push({pos:e+1,segment:n.slice(e,++e),breakType:"none"})}}return g.initial=0,g}(this._locale,this._granularity,e))}}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this),lib.wc={},lib.wc.nulWidth=0,lib.wc.controlWidth=0,lib.wc.regardCjkAmbiguous=!1,lib.wc.cjkAmbiguousWidth=2,lib.wc.combining=[[173,173],[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1756],[1759,1764],[1767,1768],[1770,1773],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2273],[2275,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531],[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],lib.wc.ambiguous=[[161,161],[164,164],[167,168],[170,170],[173,174],[176,180],[182,186],[188,191],[198,198],[208,208],[215,216],[222,225],[230,230],[232,234],[236,237],[240,240],[242,243],[247,250],[252,252],[254,254],[257,257],[273,273],[275,275],[283,283],[294,295],[299,299],[305,307],[312,312],[319,322],[324,324],[328,331],[333,333],[338,339],[358,359],[363,363],[462,462],[464,464],[466,466],[468,468],[470,470],[472,472],[474,474],[476,476],[593,593],[609,609],[708,708],[711,711],[713,715],[717,717],[720,720],[728,731],[733,733],[735,735],[768,879],[913,929],[931,937],[945,961],[963,969],[1025,1025],[1040,1103],[1105,1105],[4352,4447],[8208,8208],[8211,8214],[8216,8217],[8220,8221],[8224,8226],[8228,8231],[8240,8240],[8242,8243],[8245,8245],[8251,8251],[8254,8254],[8308,8308],[8319,8319],[8321,8324],[8364,8364],[8451,8451],[8453,8453],[8457,8457],[8467,8467],[8470,8470],[8481,8482],[8486,8486],[8491,8491],[8531,8532],[8539,8542],[8544,8555],[8560,8569],[8585,8585],[8592,8601],[8632,8633],[8658,8658],[8660,8660],[8679,8679],[8704,8704],[8706,8707],[8711,8712],[8715,8715],[8719,8719],[8721,8721],[8725,8725],[8730,8730],[8733,8736],[8739,8739],[8741,8741],[8743,8748],[8750,8750],[8756,8759],[8764,8765],[8776,8776],[8780,8780],[8786,8786],[8800,8801],[8804,8807],[8810,8811],[8814,8815],[8834,8835],[8838,8839],[8853,8853],[8857,8857],[8869,8869],[8895,8895],[8978,8978],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9312,9449],[9451,9547],[9552,9587],[9600,9615],[9618,9621],[9632,9633],[9635,9641],[9650,9651],[9654,9655],[9660,9661],[9664,9665],[9670,9672],[9675,9675],[9678,9681],[9698,9701],[9711,9711],[9725,9726],[9733,9734],[9737,9737],[9742,9743],[9748,9749],[9756,9756],[9758,9758],[9792,9792],[9794,9794],[9800,9811],[9824,9825],[9827,9829],[9831,9834],[9836,9837],[9839,9839],[9855,9855],[9875,9875],[9886,9887],[9889,9889],[9898,9899],[9917,9919],[9924,9953],[9955,9955],[9960,9983],[9989,9989],[9994,9995],[10024,10024],[10045,10045],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10102,10111],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11097],[11904,12255],[12272,12350],[12352,19903],[19968,42191],[43360,43391],[44032,55203],[57344,64255],[65024,65049],[65072,65135],[65281,65376],[65504,65510],[65533,65533],[94176,94179],[94208,101119],[110592,110895],[110928,110930],[110948,110951],[110960,111359],[126980,126980],[127183,127183],[127232,127242],[127248,127277],[127280,127337],[127344,127404],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141],[917760,917999],[983040,1048573],[1048576,1114109]],lib.wc.unambiguous=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,12255],[12272,12350],[12352,12871],[12880,19903],[19968,42191],[43360,43391],[44032,55203],[63744,64255],[65040,65049],[65072,65135],[65281,65376],[65504,65510],[94176,94179],[94208,101119],[110592,110895],[110928,110930],[110948,110951],[110960,111359],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]],lib.wc.binaryTableSearch_=function(r,e){var t,i=0,o=e.length-1;if(r<e[i][0]||r>e[o][1])return!1;for(;o>=i;)if(r>e[t=Math.floor((i+o)/2)][1])i=t+1;else{if(!(r<e[t][0]))return!0;o=t-1}return!1},lib.wc.isSpace=function(r){return lib.wc.binaryTableSearch_(r,lib.wc.combining)},lib.wc.isCjkAmbiguous=function(r){return lib.wc.binaryTableSearch_(r,lib.wc.ambiguous)},lib.wc.charWidth=function(r){return lib.wc.regardCjkAmbiguous?lib.wc.charWidthRegardAmbiguous(r):lib.wc.charWidthDisregardAmbiguous(r)},lib.wc.charWidthDisregardAmbiguous=function(r){return r<127?r>=32?1:0==r?lib.wc.nulWidth:lib.wc.controlWidth:r<160?lib.wc.controlWidth:lib.wc.isSpace(r)?0:lib.wc.binaryTableSearch_(r,lib.wc.unambiguous)?2:1},lib.wc.charWidthRegardAmbiguous=function(r){return lib.wc.isCjkAmbiguous(r)?lib.wc.cjkAmbiguousWidth:lib.wc.charWidthDisregardAmbiguous(r)},lib.wc.strWidth=function(r){for(var e,t=0,i=0;i<r.length;){var o=r.codePointAt(i);if((e=lib.wc.charWidth(o))<0)return-1;t+=e,i+=o<=65535?1:2}return t},lib.wc.substr=function(r,e,t){var i,o,n=0;if(e)for(o=0;n<r.length;){const t=r.codePointAt(n);if((o+=lib.wc.charWidth(t))>e)break;n+=t<=65535?1:2}if(null!=t){for(i=n,o=0;i<r.length;){const e=r.codePointAt(i);if((o+=lib.wc.charWidth(e))>t)break;i+=e<=65535?1:2}return r.substring(n,i)}return r.substr(n)},lib.wc.substring=function(r,e,t){return lib.wc.substr(r,e,t-e)};
//# sourceMappingURL=libdot.min.js.map